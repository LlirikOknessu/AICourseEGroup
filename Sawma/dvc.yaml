stages:
  data_preparation:
    cmd: python data_preparation.py -id data/raw -od data/prepared
    deps:
      - data_preparation.py
      - data/raw
    outs:
      - data/prepared/X_full.csv
      - data/prepared/y_full.csv
      - data/prepared/X_train.csv
      - data/prepared/y_train.csv
      - data/prepared/X_test.csv
      - data/prepared/y_test.csv
      - data/prepared/X_val.csv
      - data/prepared/y_val.csv
    params:
      - data_preparation

  linear_regression:
    cmd: python linear_regression.py -id data/prepared -od data/models -mn ${linear_regression.model_name}
    deps:
      - linear_regression.py
      - data/prepared/X_train.csv
      - data/prepared/y_train.csv
    outs:
      - data/models/${linear_regression.model_name}.csv
      - data/models/${linear_regression.model_name}.joblib
    params:
      - linear_regression

  linear_regression_validation:
    cmd: python linear_regression_validation.py -id data/prepared/ -im data/models/${linear_regression.model_name}.joblib -mn ${linear_regression.model_name}
    deps:
      - linear_regression_validation.py
      - data/prepared/X_val.csv
      - data/prepared/y_val.csv
      - data/models/${linear_regression.model_name}.joblib
    params:
      - linear_regression

  linear_regression_prod_version:
    cmd: python linear_regression_full.py -id data/prepared/ -od data/models/ -mn ${linear_regression.model_name}
    deps:
      - linear_regression_full.py
      - data/prepared/X_test.csv
      - data/prepared/y_test.csv
      - data/models/${linear_regression.model_name}.joblib
    outs:
      - data/models/${linear_regression.model_name}_prod.csv
      - data/models/${linear_regression.model_name}_prod.joblib
    params:
      - linear_regression


  mlp_training:
    cmd: python mlp_training.py -id data/prepared -od data/models -mn ${mlp.model_name}
    deps:
      - mlp_training.py
      - data/prepared/X_train.csv
      - data/prepared/y_train.csv
    outs:
      - data/models/${mlp.model_name}.h5
    params:
      - mlp

  mlp_validation:
      cmd: python mlp_validation.py -id data/prepared -im data/models/${mlp.model_name}.h5 -mn ${mlp.model_name}
      deps:
        - mlp_validation.py
        - data/prepared/X_val.csv
        - data/prepared/y_val.csv
        - data/models/${mlp.model_name}.h5
      params:
        - mlp

  mlp_prod_version:
    cmd: python mlp_prod_version.py -id data/prepared/ -od data/models/ -mn ${mlp.model_name}
    deps:
      - mlp_prod_version.py
      - data/prepared/X_full.csv
      - data/prepared/y_full.csv
    outs:
      - data/models/${mlp.model_name}_prod.h5
    params:
      - mlp



